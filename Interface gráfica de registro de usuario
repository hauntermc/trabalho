import tkinter as tk
from tkinter import messagebox

#Função para registrar um novo usuario
def registro_novo_usuario():
    usuario = entry_usuario.get()
    senha = entry_senha.get()
    confirmar_senha = entry_confirmar_senha.get()

    #Verifica se os campos de usuario e senha foram preenchidos
    if usuario and senha and confirmar_senha:
        if senha == confirmar_senha:
                #abre o arquivo para adicionar o novo usuario e senha
            with open ('usuarios1.txt','r') as arquivo:
                for linha in arquivo:
                    usr, _ = linha.strip().split(':')
                    if usr == usuario:
                        messagebox.showerror("Erro", f"O usuario '{usuario}' ja esta registrado")
                        return
            with open('usuarios1.txt', 'a') as arquivo:
                arquivo.write (f'{usuario}:{senha}\n')

            entry_usuario.delete(0,tk.END)
            entry_senha.delete(0,tk.END)
            entry_confirmar_senha.delete(0,tk.END)

            messagebox.showinfo("registro", "Usuario registrado com sucesso!")
        else:
            messagebox.showerror("Erro", "As senhas não coincidem. Por favor, digite novamente.")
    else:
       messagebox.showerror("Error","Por favor, preencha todos os campos.")





#Criar a janela principal
root = tk.Tk()
root.title("Registro de usuario")
#Criar os widgets (rotulos, entrada de texto, botao)
label_usuario = tk.Label(root, text='usuario: ')
label_usuario.pack(pady=30)

entry_usuario = tk.Entry(root, width=30)
entry_usuario.pack()

label_senha = tk.Label(root, text='senha: ')
label_senha.pack(pady=10)

entry_senha = tk.Entry(root, width =30, show = "*")
entry_senha.pack()

label_confirmar_senha = tk.Label(root,text='Confirmar a senha')
label_confirmar_senha.pack(pady=10)

entry_confirmar_senha = tk.Entry(root, width = 30, show='*')
entry_confirmar_senha.pack(pady=30)

botao_registrar = tk.Button(root, text='Registrar Usuario', command=registro_novo_usuario)
botao_registrar.pack(pady=30)
root.mainloop()
